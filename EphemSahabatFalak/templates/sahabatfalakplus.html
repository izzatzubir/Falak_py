{% extends "base.html" %}
{% block title %}{% endblock %}
{% block content %}
<style>
    .responsive-img {
      width: 100%;
      height: auto;
      max-width: 900px; /* Adjust max-width as needed */
    }

    @media (max-width: 1200px) {
      .responsive-img {
        max-width: 800px;
      }
    }

    @media (max-width: 992px) {
      .responsive-img {
        max-width: 800px;
      }
    }

    @media (max-width: 768px) {
      .responsive-img {
        max-width: 600px;
      }
    }

    @media (max-width: 576px) {
      .responsive-img {
        max-width: 100%;
      }
    }
</style>
<h3>Almanak Anak Bulan</h3>

<div>
    <form action="/sahabatfalakplus" method="post">
        <div class="row pt-3">
            <h5>Masukkan nilai-nilai berikut</h5>
            <div class="col-md-4">
                <label for="latitud" class="form-label">Latitud (°U)</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#latitudmodal" >
                    ?
                </button>
                  <!-- Modal -->
                    <div class="modal fade" id="latitudmodal" tabindex="-1" aria-labelledby="latitudModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fs-5" id="latitudModalLabel">Latitud</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                Nilai latitud boleh dimasukkan antara 90 hingga -90, nilai positif bagi utara dan negatif bagi selatan.
                            </div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                        </div>
                    </div>
                {% if latitud is defined %}
                <input type="text" class="form-control" id="latitud" placeholder={{latitud}} value="{{latitud}}" name="latitud" >
                {% else %}
                <input type="text" class="form-control" id="latitud" placeholder="5.41144" name="latitud" >
                {% endif %}
            </div>
            <div class="col-md-4">
                <label for="longitud" class="form-label">Longitud (°T)</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#longitudmodal" >
                    ?
                </button>

                  <!-- Modal -->
                  <div class="modal fade" id="longitudmodal" tabindex="-1" aria-labelledby="longitudModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="longitudModalLabel">Longitud</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Nilai Longitud boleh dimasukkan antara 180 hingga -180,
                            dengan nilai positif bagi timur dan negatif bagi barat.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% if longitud is defined %}
                <input type="text" class="form-control" id="longitud" name="longitud" placeholder={{longitud}} value="{{longitud}}">
                {% else %}
                <input type="text" class="form-control" id="longitud" name="longitud" placeholder="100.19672" >
                {% endif %}
            </div>
            <div class="col-md-4">
                <label for="elevation" class="form-label">Ketinggian (m)</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#ketinggianModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="ketinggianModal" tabindex="-1" aria-labelledby="ketinggianModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="ketinggianModalLabel">Ketinggian</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Ketinggian ialah ketinggian lokasi dari aras laut,
                            dengan unit meter. Nilai ketinggian akan memberi kesan pada tekanan, serta sudut junaman bagi waktu Syuruk
                            dan waktu Maghrib.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% if elevation is defined %}
                <input type="text" class="form-control" id="elevation" name="elevation" placeholder={{elevation}} value="{{elevation}}">
                {% else %}
                <input type="text" class="form-control" id="elevation" name="elevation" placeholder="40">
                {% endif %}
            </div>
            <div class="col-md-4">
                <label for="ketepatanlokasi" class="form-label">Lokasi GPS</label>
                <div class="row">
                    <div class="col-md-2">
                        <button type="button" name="locationbutton" class="btn btn-info" onclick="getLocation()">Lokasi</button>
                    </div>
                    <div class="col-md-10">
                        <input type="text" class="form-control" id="ketepatanlokasi" name="ketepatanlokasi" placeholder="Ketepatan" readonly>
                    </div>
                </div>
            </div>
            <div name="toggleDiv" class="col-md-4" hidden>
                <label for="temperature" class="form-label">Suhu (°C)</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#suhuModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="suhuModal" tabindex="-1" aria-labelledby="suhuModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="suhuModalLabel">Suhu</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Parameter suhu dan tekanan ini menentukan kadar pembiasan. Ia memberi kesan pada waktu syuruk dan
                maghrib. Nilai suhu adalah dalam unit °Celcius, manakala tekanan dalam unit milibar.  Nilai suhu
                ditetapkan pada 27 °Celcius.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% if temperature is defined %}
                <input type="text" class="form-control" id="temperature" name="temperature" placeholder={{temperature}} value="{{temperature}}">
                {% else %}
                <input type="text" class="form-control" id="temperature" name="temperature" placeholder="27.0">
                {% endif %}
            </div>
            <div name="toggleDiv" class="col-md-4" hidden>
                <label for="pressure" class="form-label">Tekanan (mbar)</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#tekananModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="tekananModal" tabindex="-1" aria-labelledby="tekananModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="tekananModalLabel">Tekanan</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Parameter suhu dan tekanan ini menentukan kadar pembiasan. Ia memberi kesan pada waktu syuruk dan
                maghrib. Nilai suhu adalah dalam unit °Celcius, manakala tekanan dalam unit milibar. Nilai yang digunakan
                bagi tekanan ialah 1013.25 milibar, iaitu nilai piawai bagi tekanan pada aras laut.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% if pressure is defined %}
                <input type="text" class="form-control" id="pressure" name="pressure" placeholder={{pressure}} value="{{pressure}}">
                {% else %}
                <input type="text" class="form-control" id="pressure" name="pressure" value="1013.25">
                {% endif %}
            </div>
            <div class="col-md-4">
                <label for="datetime" class="form-label">Tarikh dan Masa:</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#tarikhModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="tarikhModal" tabindex="-1" aria-labelledby="tarikhModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="tarikhModalLabel">Tarikh dan Masa</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>
                                Tarikh merujuk pada hari, bulan dan tahun. Ini menentukan tarikh waktu solat harian, atau bulanan
                serta jadual kiblat yang hendak dihitung. Masa merujuk pada jam, minit dan saat. Ini akan menentukan
                masa bagi jadual kiblat yang hendak dihitung.
                            </p>
                            <p>
                                Hitungan dalam SahabatFalak ini menggunakan kalendar Julian bagi tarikh pada dan sebelum Khamis 4 Oktober 1582, dan
                                menggunakan kalendar Gregorian bermula pada dan selepas Jumaat 15 Oktober 1582.
                            </p>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                {% if original_date is defined %}
                <input type="datetime-local" class="form-control" id="datetime" name="datetime"  step="1" placeholder="{{original_date}}" value="{{original_date}}">
                {% else %}
                <input type="datetime-local" class="form-control" id="datetime" name="datetime"  step="1" required>
                {% endif %}
            </div>
            <div name="toggleDiv" class="col-md-4" hidden>
                <label for="timezone" class="form-label">Zon Waktu</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#zonwaktuModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="zonwaktuModal" tabindex="-1" aria-labelledby="zonwaktuModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="zonwaktuModalLabel">Zon Waktu</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            Parameter zon waktu menentukan zon waktu bagi hitungan. Parameter Asia/Kuala_Lumpur adalah bersesuaian
                bagi hitungan di Malaysia. Jika parameter Lain-lain dipilih, zon waktu akan ditentukan berdasarkan
                latitud dan longitud yang diberi.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                <select class="form-select form-select-lg mb-3" name="timezone" id="timezone">
                    {% if timezone == 'lain' %}
                    <option value="asia_KL">Asia/Kuala_Lumpur</option>
                    <option selected value="lain">Lain-lain</option>
                    {% else %}
                    <option selected value="asia_KL">Asia/Kuala Lumpur</option>
                    <option value="lain">Lain-lain</option>
                    {% endif %}
                </select>
            </div>
            <div class="col-md-4">
                <label for="lokasi_rasmi" class="form-label">Lokasi Rasmi</label>
                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#lokasirasmiModal" >
                    ?
                </button>
                  <!-- Modal -->
                  <div class="modal fade" id="lokasirasmiModal" tabindex="-1" aria-labelledby="lokasirasmiModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="lokasirasmiModalLabel">Lokasi Rasmi</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p>
                                Pengguna boleh memilih lokasi cerapan rasmi dengan menekan pada pilihan 'Lokasi Rasmi'.
                                Jika lokasi rasmi dipilih, pengguna tidak perlu memasukkan maklumat latitud, longitud dan ketinggian
                                kerana telah ditetapkan. Maklumat ini diperoleh dari laman berikut:
                                <a href="https://archive.data.gov.my/data/en_US/dataset/lokasi-rasmi-cerapan-hilal-malaysia">Lokasi Rasmi</a>
                                Jika pengguna ingin menghitung pada lokasi lain, pilih Tidak Berkaitan.
                            </p>
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    </div>
                </div>
                <select class="form-select form-select-lg mb-3" name="lokasi_rasmi" id="lokasi_rasmi">
                    <option value="PFST">Pusat Falak Sheikh Tahir, Pulau Pinang</option>
                    <option selected value="Tiada">Tidak Berkaitan</option>
                    <option value="Malindo">Pantai Malindo, Pulau Pinang (Tidak Rasmi)</option>
                    <option value="Kuala_Perlis">Menara Pandang Masjid Al-Hussain Kuala Perlis</option>
                    <option value="Kuala_Sg_Baru">Kuala Sungai Baru, Simpang Empat, Perlis</option>
                    <option value="Menara_Telekom">Menara Telekom, Alor Setar</option>
                    <option value="Pulau_Sayak">Kg. Pulau Sayak, Kuala Muda</option>
                    <option value="Pemandangan_Indah">Pemandangan Indah, Langkawi</option>
                    <option value="Pasir_Panjang">Pantai Pasir Panjang, Manjung</option>
                    <option value="BCSelangor">Balai Cerap Selangor, Sabak Bernam</option>
                    <option value="BKTMalawati">Bukit Malawati, Kuala Selangor</option>
                    <option value="BKTJugra">Bukit Jugra, Banting</option>
                    <option value="MenaraKL">Menara Kuala Lumpur</option>
                    <option value="PICC">Putrajaya International Convention Centre (PICC), Putrajaya</option>
                    <option value="BCTK">Balai Cerap Teluk Kemang, Port Dickson</option>
                    <option value="KFAK">Kompleks Falak Al-Khawarizmi, Tg. Bidara</option>
                    <option value="PontianKecil">Bangunan Sultan Ismail, Pontian Kecil</option>
                    <option value="BKTTanjungBatu">Bukit Tanjung Batu, Nenasi, Pekan</option>
                    <option value="BKTPelindung">Bukit Pelindung, Kuantan</option>
                    <option value="GNGBrinchang">Gunung Brinchang, Cameron Highlands</option>
                    <option value="BKTGeliga">Bukit Geliga, Kemaman</option>
                    <option value="BKTBesar">Bukit Besar, Kuala Terengganu</option>
                    <option value="BCUnisza">Balai Cerap KUSZA, Merang, Setiu</option>
                    <option value="PPerhentian">Pulau Perhentian, Besut</option>
                    <option value="SEDC">Menara State Economic Development Corporation (SEDC), Kota Bharu</option>
                    <option value="BKTPeraksi">Bukit Peraksi, Pasir Puteh</option>
                    <option value="BKTKGTembeling">Bukit Kampung Tembeling, Kuala Krai</option>
                    <option value="PantaiMekMas">Pantai Mek Mas</option>
                    <option value="BCAB">Balai Cerap Al-Biruni, Tg. Dumpil, Putatan</option>
                    <option value="MUMSabah">Menara Universiti Malaysia Sabah, Kampus Antarabangsa Labuan</option>
                    <option value="PFM">Pusat Falak Miri (Luak Esplanade, Miri), Miri</option>
                    <option value="TanjungBatu">Tanjung Batu, Bintulu</option>
                    <option value="TelukBandung">Teluk Bandung, Kuching</option>
                </select>
            </div>
            <div class="row pt-3">
                <div class="col-md-4">
                    <label for="pilihan" class="form-label">Pilih Jenis Data</label>
                    <select class="form-select form-select-lg mb-3" name="pilihan" id="pilihan">
                        {% if pilihan == 'dataHilalRingkas' %}
                        <option selected value="dataHilalRingkas">Data Hilal Ringkas</option>
                        <option value="PerbandinganElongasi">Perbandingan Jarak Lengkung dan Fasa Bulan</option>
                        <option value="dataHilalPenuh">Data Hilal Penuh</option>
                        {% elif pilihan == 'PerbandinganElongasi' %}
                        <option selected value="PerbandinganElongasi">Perbandingan Jarak Lengkung dan Fasa Bulan</option>
                        <option value="dataHilalRingkas">Data Hilal Ringkas</option>
                        <option value="dataHilalPenuh">Data Hilal Penuh</option>
                        {% elif pilihan == 'dataHilalPenuh' %}
                        <option selected value="dataHilalPenuh">Data Hilal Penuh</option>
                        <option value="dataHilalRingkas">Data Hilal Ringkas</option>
                        <option value="PerbandinganElongasi">Perbandingan Jarak Lengkung dan Fasa Bulan</option>
                        {% else %}
                        <option selected value="dataHilalRingkas">Data Hilal Ringkas</option>
                        <option value="PerbandinganElongasi">Perbandingan Jarak Lengkung dan Fasa Bulan</option>
                        <option value="dataHilalPenuh">Data Hilal Penuh</option>
                        {% endif %}
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="topo_pilihan" class="form-label">Pilih titik rujukan</label>
                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#topo_pilihanModal" >
                    ?
                </button>
                       <!-- Modal -->
                        <div class="modal fade" id="topo_pilihanModal" tabindex="-1" aria-labelledby="topo_pilihanModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h1 class="modal-title fs-5" id="topo_pilihanModalLabel">Titik Rujukan</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>
                                        Rujukan toposentrik menghitung data hilal
                                        dengan rujukan dari kedudukan pemerhati.
                                    </p>
                                    <p>
                                        Rujukan toposentrik menghitung data hilal
                                        dengan rujukan dari pusat Bumi.
                                    </p>
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                            </div>
                        </div>
                    <select class="form-select form-select-lg mb-3" name="topo_pilihan" id="topo_pilihan">
                        {% if topo == 'geocentric' %}
                        <option selected value="geocentric">Geosentrik</option>
                        <option value="topocentric">Toposentrik</option>
                        {% else %}
                        <option selected value="topocentric">Toposentrik</option>
                        <option value="geocentric">Geosentrik</option>
                        {% endif %}
                    </select>
                </div>
            </div>
            <div class="pt-2">
                <button type="button" id="toggleButton" class="btn btn-outline-success">Tambah Parameter</button>
            </div>
            <div class="pt-2">
                <button type="submit" class="btn btn-primary">Hitung</button>
            </div>
        </div>
    </form>

    <div id="locationResult" hidden></div>
    <hr>
    <br>
    <div>
        {% if pilihan == 'dataHilalRingkas' %}
        <h2>Data Hilal</h2>
        <p>Tarikh: {{parsed_date}}</p>
        <p>Rujukan: {{topo}}</p>
        <div class="row pt-3">
            <div class="col-md-6">
                <table class="table table-bordered table-striped-columns">
                    <thead>
                        <tr>
                            <th scope="col">Data</th>
                            <th scope="col">Nilai</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Maghrib</td>
                            <td>{{maghrib}}</td>
                        </tr>
                        <tr>
                            <td>Bulan Terbenam</td>
                            <td>{{moon_set}}</td>
                        </tr>
                        <tr>
                            <td>Ijtimak
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#ijtimak-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="ijtimak-Modal" tabindex="-1" aria-labelledby="ijtimak-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="ijtimak-ModalLabel">Ijtimak</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Waktu ketika longitud ekliptik Bulan sama dengan longitud ekliptik Matahari. Nilai ijtimak berbeza
                                            bagi toposentrik dan geosentrik. Nilai yang biasa digunakan dalam almanak serta perisian astronomi
                                            ialah ijtimak bagi geosentrik.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{ijtimak}}</td>
                        </tr>
                        <tr>
                            <td>Umur Bulan
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#umurbulan-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="umurbulan-Modal" tabindex="-1" aria-labelledby="umurbulan-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="umurbulan-ModalLabel">Umur Bulan</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Tempoh masa antara ijtimak dan waktu maghrib.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{moon_age}}</td>
                        </tr>
                        <tr>
                            <td>Jarak Lengkung
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkung1-Modal" >
                                    ?
                                </button>
                                <!-- Modal -->
                                <div class="modal fade" id="jaraklengkung1-Modal" tabindex="-1" aria-labelledby="jaraklengkung1-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="jaraklengkung1-ModalLabel">Jarak Lengkung</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Sudut antara Bulan dan Matahari, dari titik rujukan.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{elongation}}</td>
                        </tr>
                        <tr>
                            <td>Matahari Terbit</td>
                            <td>{{sun_rise}}</td>
                        </tr>
                        <tr>
                            <td>Bulan Terbit</td>
                            <td>{{moon_rise}}</td>
                        </tr>
                        <tr>
                            <td>Altitud Bulan
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#altitudbulan-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="altitudbulan-Modal" tabindex="-1" aria-labelledby="altitudbulan-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="altitudbulan-ModalLabel">Altitud Bulan</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Sudut ketinggian bulan iaitu sudut menegak dari ufuk 0°, ke bulan.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{altitude}}</td>
                        </tr>
                        <tr>
                            <td>Nisbah Jarak Bulan
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#nisbahjarak-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="nisbahjarak-Modal" tabindex="-1" aria-labelledby="nisbahjarak-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="nisbahjarak-ModalLabel">Nisbah Jarak Bulan</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Hasil bahagi antara jarak bulan ke titik rujukan dengan purata jarak bulan ke bumi. Rumusnya ialah:
                                            $$ \text{Jarak}_{\text{nisbah}} = \frac{\text{Jarak}_{\text{semasa}}}{384000} $$
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{moon_distance_ratio}}</td>
                        </tr>
                        <tr>
                            <td>Beza Azimut
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#bezaazmiut-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="bezaazmiut-Modal" tabindex="-1" aria-labelledby="bezaazmiut-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="bezaazmiut-ModalLabel">Beza Azimut</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Beza azimut antara Bulan dan Matahari ketika waktu maghrib. Istilah ini dikenali sebagai
                                            Arc of Vision (ARCV) dan biasanya digunakan dengan rujukan Geosentrik.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{azimuth_difference}}</td>
                        </tr>
                        <tr>
                            <td>Kecerahan
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#kecerahan-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="kecerahan-Modal" tabindex="-1" aria-labelledby="kecerahan-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="kecerahan-ModalLabel">Kecerahan</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Peratus piring Bulan yang memantulkan cahaya Matahari, yang dilihat dari titik rujukan.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{illumination}}</td>
                        </tr>
                        <tr>
                            <td>Tempoh Bulan Terbenam
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#tempohterbenam-Modal">
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="tempohterbenam-Modal" tabindex="-1" aria-labelledby="tempohterbenam-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="tempohterbenam-ModalLabel">Tempoh Bulan Terbenam</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Tempoh antara waktu maghrib, dan bulan terbenam.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{lag_time}}</td>
                        </tr>
                        <tr>
                            <td>Lebar Hilal
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#lebarhilal-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="lebarhilal-Modal" tabindex="-1" aria-labelledby="lebarhilal-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="lebarhilal-ModalLabel">Lebar Hilal</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Lebar hilal ialah sudut terbesar bagi kawasan hilal yang memantulkan cahaya matahari.
                                            Lebar Hilal biasanya dihitung dengan rujukan toposentrik, kecuali bagi kriteria sebelum 1997 (sebelum Yallop 1997).
                                            Ketika bulan purnama, 'lebar hilal' ialah sekitar 0.53° atau 32 arka minit. Pengiraan
                                            lebar hilal dalam Sahabat Falak menggunakan formula berikut:
                                            <a href="https://www.researchgate.net/publication/343219170_Moon's_crescent_width">Lebar Hilal</a>
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{crescent_width}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            {% if gambar_Hilal %}
            <div class="col-md-6">
                <table class="table table-bordered table-striped-columns">
                    <thead>
                        <tr>
                            <th scope="col">Kriteria</th>
                            <th scope="col">Nilai</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Odeh 2004
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#odeh-Modal" >
                                    ?
                                 </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="odeh-Modal" tabindex="-1" aria-labelledby="odeh-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="odeh-ModalLabel">Odeh 2004</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria kenampakan oleh Mohammad Shawkat Odeh, berdasarkan rumus dalam <a href="https://astronomycenter.net/pdf/2006_cri.pdf">kertas ini</a>.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{odeh}}</td>
                        </tr>
                        <tr>
                            <td>Yallop 1997
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#yallop-Modal" >
                                    ?
                                </button>
                                  <!-- Modal -->
                                  <div class="modal fade" id="yallop-Modal" tabindex="-1" aria-labelledby="yallop-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="yallop-ModalLabel">Yallop 1997</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria kenampakan oleh BD Yallop, berdasarkan rumus dalam <a href="https://astronomycenter.net/pdf/yallop_1997.pdf">kertas ini</a>.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{yallop}}</td>
                        </tr>
                        <tr>
                            <td>MABIMS 2021
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#mabims2021-Modal">
                                    ?
                                </button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="mabims2021-Modal" tabindex="-1" aria-labelledby="mabims2021-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="mabims2021-ModalLabel">MABIMS 2021</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria kenampakan berdasarkan dua parameter iaitu jarak lengkung dan altitud.
                                            Bulan dikira melepasi syarat imkanurrukyah jika jarak lengkung toposentrik Bulan-Matahari melebihi 6°24' (6.4°) DAN
                                            altitud Bulan melebihi 3° ketika waktu Maghrib.
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{mabims2021}}</td>
                        </tr>
                        <tr>
                            <td>Malaysia 2013
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#malaysia2013-Modal">
                                    ?
                                </button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="malaysia2013-Modal" tabindex="-1" aria-labelledby="malaysia2013-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="malaysia2013-ModalLabel">Malaysia 2013</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria kenampakan berdasarkan dua parameter iaitu jarak lengkung dan altitud.
                                            Bulan dikira melepasi syarat imkanurrukyah jika jarak lengkung toposentrik Bulan-Matahari melebihi 5° DAN
                                            altitud Bulan melebihi 3° ketika waktu Maghrib.
                                            <p>
                                                <a href="https://www.scribd.com/document/625929575/KRITERIA-IMKANUR-RUKYAH-TERKINI-1443H-Prof-Dato-Dr-Zambri-WFN">Rujukan</a>.
                                            </p>
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{malaysia2013}}</td>
                        </tr>
                        <tr>
                            <td>Muhammadiyyah
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#Muhammadiyyah-Modal">
                                    ?
                                </button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="Muhammadiyyah-Modal" tabindex="-1" aria-labelledby="Muhammadiyyah-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="Muhammadiyyah-ModalLabel">Muhammadiyyah</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria ini juga dikenali sebagai kriteria wujudul hilal.
                                            Kriteria ini dihitung berdasarkan dua parameter iaitu umur Bulan dan altitud Bulan.
                                            Hilal dikira memenuhi syarat wujudul hilal jika umur Bulan melebihi 0 saat DAN altitud Bulan melebihi 0°.
                                            <p>
                                                <a href="https://muhammadiyah.or.id/2022/02/hisab-hakiki-wujudul-hilal-apa-dan-bagaimana/">Rujukan</a>.
                                            </p>
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{muhammadiyah}}</td>
                        </tr>
                        <tr>
                            <td>Istanbul 1978
                                <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#istanbul78-Modal">
                                    ?
                                </button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="istanbul78-Modal" tabindex="-1" aria-labelledby="istanbul78-ModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="istanbul78-ModalLabel">Istanbul 1978</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Kriteria kenampakan berdasarkan dua parameter iaitu jarak lengkung dan altitud.
                                            Bulan dikira melepasi syarat imkanurrukyah jika jarak lengkung geosentrik Bulan-Matahari melebihi 8° DAN
                                            altitud geosentrik Bulan melebihi 5° ketika waktu Maghrib.
                                            <p>
                                                <a href="https://eprints.um.edu.my/15587/1/0001.pdf">Rujukan</a>.
                                            </p>
                                        </div>
                                        <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td>{{istanbul78}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div>

                <h4>Simulasi Langit</h4>
                <img src="data:image/png;base64,{{ gambar_Hilal }}" alt="Simulasi hilal tidak bersesuaian pada tarikh ini" class="responsive-img">
                {% endif %}
            </div>
        </div>

        {% elif pilihan == 'PerbandinganElongasi' %}
        <div>
            <h2>Perbandingan Fasa Bulan dan Jarak Lengkung</h2>
            <p>Tarikh: {{parsed_date}}</p>
            <p>Rujukan: {{topo}}</p>
            <div class="row-p-2">
                <div class="col-md-4">
                    <table class="table table-bordered table-striped-columns">
                        <thead>
                            <tr>
                                <th scope="col">Data</th>
                                <th scope="col">Nilai</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Fasa Bulan
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#databulanModal" >
                                        ?
                                    </button>
                                       <!-- Modal -->
                                        <div class="modal fade" id="databulanModal" tabindex="-1" aria-labelledby="databulanModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="databulanModalLabel">Fasa Bulan</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>
                                                        Fasa bulan adalah berdasarkan sudut longitud ekliptik Bulan.
                                                    </p>
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                </td>
                                <td>{{fasa}}</td>
                            </tr>
                            <tr>
                                <td>Jarak Lengkung
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkung2-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="jaraklengkung2-Modal" tabindex="-1" aria-labelledby="jaraklengkung2-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="jaraklengkung2-ModalLabel">Jarak Lengkung</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Sudut antara Bulan dan Matahari, dari titik rujukan.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{elong}}</td>
                            </tr>
                            <tr>
                                <td>Jarak Lengkung Minimum (Tarikh)
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkungminimumtarikh-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="jaraklengkungminimumtarikh-Modal" tabindex="-1" aria-labelledby="jaraklengkungminimumtarikh-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="jaraklengkungminimumtarikh-ModalLabel">Jarak Lengkung Minimum (Tarikh)</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Tarikh dan Masa ketika Jarak Lengkung Bulan-Matahari adalah minimum.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{elong_min}}</td>
                            </tr>
                            <tr>
                                <td>Ijtimak
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#ijtimak1-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="ijtimak1-Modal" tabindex="-1" aria-labelledby="ijtimak1-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="ijtimak1-ModalLabel">Ijtimak</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Waktu ketika longitud ekliptik Bulan sama dengan longitud ekliptik Matahari. Nilai ijtimak berbeza
                                                bagi toposentrik dan geosentrik. Nilai yang biasa digunakan dalam almanak serta perisian astronomi
                                                ialah ijtimak bagi geosentrik.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{conj}}</td>
                            </tr>
                            <tr>
                                <td>Jarak Lengkung Maksimum (Tarikh)
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkungmaksimumtarikh-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="jaraklengkungmaksimumtarikh-Modal" tabindex="-1" aria-labelledby="jaraklengkungmaksimumtarikh-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="jaraklengkungmaksimumtarikh-ModalLabel">Jarak Lengkung Maksimum (Tarikh)</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Tarikh dan Masa ketika Jarak Lengkung Bulan-Matahari adalah maksimum.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{elong_max}}</td>
                            </tr>
                            <tr>
                                <td>Purnama
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#Purnama-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="Purnama-Modal" tabindex="-1" aria-labelledby="Purnama-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="Purnama-ModalLabel">Purnama</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Tarikh dan Masa ketika sudut longitud ekliptik Bulan adalah 180°.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{opp}}</td>
                            </tr>
                            <tr>
                                <td>Jarak Lengkung Minimum (Sudut)
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkungminimumsudut-Modal">
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="jaraklengkungminimumsudut-Modal" tabindex="-1" aria-labelledby="jaraklengkungminimumsudut-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="jaraklengkungminimumsudut-ModalLabel">Jarak Lengkung Minimum (Sudut)</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Sudut minimum Jarak Lengkung Bulan-Matahari bagi kitaran bulan ini.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{sudut_min}}</td>
                            </tr>
                            <tr>
                                <td>Jarak Lengkung Maksimum (Sudut)
                                    <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkungmaksimumsudut-Modal" >
                                        ?
                                    </button>
                                      <!-- Modal -->
                                      <div class="modal fade" id="jaraklengkungmaksimumsudut-Modal" tabindex="-1" aria-labelledby="jaraklengkungmaksimumsudut-ModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                            <h1 class="modal-title fs-5" id="jaraklengkungmaksimumsudut-ModalLabel">Jarak Lengkung Maksimum (Sudut)</h1>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                Sudut maksimum Jarak Lengkung Bulan-Matahari bagi kitaran bulan ini.
                                            </div>
                                            <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{sudut_max}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% elif pilihan == 'dataHilalPenuh' %}
        <div>
            {% if efemeris_hilal_present %}
            <h2>Efemeris Hilal</h2>
            <p>Tarikh: {{parsed_date}}</p>
            <p>Rujukan: {{topo}}</p>
            <p>Maghrib: {{maghrib}}</p>
            <p>Bulan Terbenam: {{moon_set}}</p>
            <div class="container mb-2">
                <div class="tab_box">
                    <button class="tab_btn">Posisi</button>
                    <button class="tab_btn active">Saiz</button>
                    <button class="tab_btn">Beza Sudut</button>
                    <div class="line"></div>
                </div>
                <br>
                <div class="content_box">
                    <div class="content table-responsive-lg">
                        <table class="table table-bordered table-striped-columns">
                            <thead>
                                <tr>
                                    <th scope="col">Waktu</th>
                                    <th scope="col">Jarak Lengkung
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#jaraklengkung-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="jaraklengkung-Modal" tabindex="-1" aria-labelledby="jaraklengkung-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="jaraklengkung-ModalLabel">Jarak Lengkung</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Sudut antara Bulan dan Matahari, dari titik rujukan.
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                    <th scope="col">Alt Bulan
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#altitudbulan1-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="altitudbulan1-Modal" tabindex="-1" aria-labelledby="altitudbulan1-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="altitudbulan1-ModalLabel">Altitud Bulan</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Sudut ketinggian bulan iaitu sudut menegak dari ufuk 0°, ke bulan.
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                    <th scope="col">Az Bulan(°)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in range(efemeris_hilal|length) %}
                                <tr>
                                    <td>{{efemeris_hilal.index[i]}}</td>
                                    <td>{{efemeris_hilal["Elongasi"][i]}}</td>
                                    <td>{{efemeris_hilal["Alt Bulan"][i]}}</td>
                                    <td>{{efemeris_hilal["Az Bulan"][i]}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="content_box">
                    <div class="content active table-responsive-lg">
                        <table class="table table-bordered table-striped-columns">
                            <thead>
                                <tr>
                                    <th scope="col">Waktu</th>
                                    <th scope="col">Kecerahan (%)
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#kecerahan1-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="kecerahan1-Modal" tabindex="-1" aria-labelledby="kecerahan1-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="kecerahan1-ModalLabel">Kecerahan</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Peratus piring Bulan yang memantulkan cahaya Matahari, yang dilihat dari titik rujukan.
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                    <th scope="col">Lebar Hilal (')
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#lebarhilal1-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="lebarhilal1-Modal" tabindex="-1" aria-labelledby="lebarhilal1-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="lebarhilal1-ModalLabel">Lebar Hilal</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Lebar hilal ialah sudut terbesar bagi kawasan hilal yang memantulkan cahaya matahari.
                                                    Lebar Hilal biasanya dihitung dengan rujukan toposentrik, kecuali bagi kriteria sebelum 1997 (sebelum Yallop 1997).
                                                    Ketika bulan purnama, 'lebar hilal' ialah sekitar 0.53° atau 32 arka minit. Pengiraan
                                                    lebar hilal dalam Sahabat Falak menggunakan formula berikut:
                                                    <a href="https://www.researchgate.net/publication/343219170_Moon's_crescent_width">Lebar Hilal</a>
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in range(efemeris_hilal|length) %}
                                <tr>
                                    <td>{{efemeris_hilal.index[i]}}</td>
                                    <td>{{efemeris_hilal["Illuminasi bulan(%)"][i]}}</td>
                                    <td>{{efemeris_hilal["Lebar Hilal"][i]}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="content_box">
                    <div class="content table-responsive-lg">
                        <table class="table table-bordered table-striped-columns">
                            <thead>
                                <tr>
                                    <th scope="col">Waktu</th>
                                    <th scope="col">Beza Azimut(°)
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#bezaazmiut1-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="bezaazmiut1-Modal" tabindex="-1" aria-labelledby="bezaazmiut1-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="bezaazmiut1-ModalLabel">Beza Azimut</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Beza azimut antara Bulan dan Matahari ketika waktu maghrib. Istilah ini dikenali sebagai
                                                    Difference of Azimuth (DAZ).
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                    <th scope="col">ARCV (°)
                                        <button type="button" class="btn btn-warning m-1" data-bs-toggle="modal" data-bs-target="#arcv-Modal">
                                            ?
                                        </button>
                                          <!-- Modal -->
                                          <div class="modal fade" id="arcv-Modal" tabindex="-1" aria-labelledby="arcv-ModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="arcv-ModalLabel">ARCV</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    Beza altitud antara pusat Bulan dan pusat Matahari. Istilah ini dikenali sebagai
                                                    Arc of Vision (ARCV) dan biasanya digunakan dengan rujukan Geosentrik.
                                                </div>
                                                <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in range(efemeris_hilal|length) %}
                                <tr>
                                    <td>{{efemeris_hilal.index[i]}}</td>
                                    <td>{{efemeris_hilal["DAZ"][i]}}</td>
                                    <td>{{efemeris_hilal["ARCV"][i]}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            {% else %}
            <h2>Efemeris hilal</h2>
            <p>Efemeris hilal tidak sesuai dijana pada {{parsed_date}}</p>
            <p>Sila cuba pada hari ijtimak, atau hari selepasnya. Ijtimak berlaku pada: {{ijtimak}}</p>

            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const selectElement = document.getElementById('pilihan');
        const pressureContainer = document.getElementById('pressure-container');

        selectElement.addEventListener('change', function() {
            if (this.value === 'Bulan') {
                pressureContainer.innerHTML = `
                    <select class="form-select form-select-lg mb-3" name="topo_pilihan" id="topo_pilihan">
                    <option selected value="topocentric">Toposentrik</option>
                    <option value="geocentric">Geosentrik</option>
                  </select>
                `;
            } else {
                pressureContainer.innerHTML = '';
            }
        });
    });
    document.getElementById("lokasi_rasmi").addEventListener("change", function() {
        var lokasi_rasmi = this.value;
        var latitudeInput = document.getElementById("latitud");
        var longitudeInput = document.getElementById("longitud");
        var elevationInput = document.getElementById("elevation");

        if (lokasi_rasmi == "PFST") {
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.4114");
            longitudeInput.setAttribute("value", "100.19672");
            elevationInput.setAttribute("value", "40");
        }
        else if (lokasi_rasmi == "Malindo"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.338354");
            longitudeInput.setAttribute("value", "100.1945");
            elevationInput.setAttribute("value", "3");
        }
        else if (lokasi_rasmi == "Kuala_Perlis"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.396389");
            longitudeInput.setAttribute("value", "100.1275");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "Menara_Telekom"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.12430278");
            longitudeInput.setAttribute("value", "100.3674528");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "Pulau_Sayak"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.65491944");
            longitudeInput.setAttribute("value", "100.3318111");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "Pemandangan_Indah"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.33609167");
            longitudeInput.setAttribute("value", "99.741475");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "Pasir_Panjang"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.12430278");
            longitudeInput.setAttribute("value", "100.3674528");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BCSelangor"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.81893611");
            longitudeInput.setAttribute("value", "100.8143472");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTMalawati"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.34166944");
            longitudeInput.setAttribute("value", "101.2445917");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTJugra"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "2.83587778");
            longitudeInput.setAttribute("value", "101.4170583");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "MenaraKL"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.152825");
            longitudeInput.setAttribute("value", "101.7037111");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "PICC"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "2.89449167");
            longitudeInput.setAttribute("value", "101.6766833");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BCTK"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "2.44543333");
            longitudeInput.setAttribute("value", "101.8542028");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "KFAK"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "2.29398611");
            longitudeInput.setAttribute("value", "102.0834417");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "PontianKecil"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "1.48781389");
            longitudeInput.setAttribute("value", "103.3872028");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTTanjungBatu"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.20582222");
            longitudeInput.setAttribute("value", "103.4449139");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTPelindung"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.83124444");
            longitudeInput.setAttribute("value", "103.361075");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "GNGBrinchang"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "4.51733889");
            longitudeInput.setAttribute("value", "101.3825806");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTGeliga"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "4.20641944");
            longitudeInput.setAttribute("value", "103.4359222");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTBesar"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.30681667");
            longitudeInput.setAttribute("value", "103.1344528");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BCUnisza"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.53542222");
            longitudeInput.setAttribute("value", "102.9467639");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "PPerhentian"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.91522778");
            longitudeInput.setAttribute("value", "102.7156583");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "SEDC"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.12873889");
            longitudeInput.setAttribute("value", "102.2348222");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTPeraksi"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.85749444");
            longitudeInput.setAttribute("value", "102.4825389");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BKTKGTembeling"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.25456667");
            longitudeInput.setAttribute("value", "102.2686");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "BCAB"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.90428333");
            longitudeInput.setAttribute("value", "116.0386722");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "MUMSabah"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "5.27851667");
            longitudeInput.setAttribute("value", "115.1734806");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "PFM"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "4.31610278");
            longitudeInput.setAttribute("value", "113.9611556");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "TanjungBatu"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "3.21345278");
            longitudeInput.setAttribute("value", "113.0488194");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "TelukBandung"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "1.75305833");
            longitudeInput.setAttribute("value", "110.3147444");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "Kuala_Sg_Baru"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.328244");
            longitudeInput.setAttribute("value", "100.156306");
            elevationInput.setAttribute("value", "0");
        }
        else if (lokasi_rasmi == "PantaiMekMas"){
            latitudeInput.removeAttribute("required");
            longitudeInput.removeAttribute("required");
            elevationInput.removeAttribute("required");
            latitudeInput.setAttribute("readonly", "readonly");
            longitudeInput.setAttribute("readonly", "readonly");
            elevationInput.setAttribute("readonly", "readonly");
            latitudeInput.setAttribute("value", "6.215556");
            longitudeInput.setAttribute("value", "102.243333");
            elevationInput.setAttribute("value", "0");
        }
        else {
            latitudeInput.setAttribute("required", "required");
            longitudeInput.setAttribute("required", "required");
            elevationInput.setAttribute("required", "required");
            latitudeInput.removeAttribute("readonly");
            longitudeInput.removeAttribute("readonly");
            elevationInput.removeAttribute("readonly");
        }
    });
</script>
<script>
    document.getElementById('toggleButton').addEventListener('click', function() {
        var divs = document.querySelectorAll('div[name="toggleDiv"][hidden]');
        var button = document.getElementById('toggleButton');
        var suhu = document.getElementById('temperature')
        var tekanan = document.getElementById('pressure')
        if (divs.length > 0) {
            divs.forEach(function(div) {
            div.removeAttribute('hidden');
            });
            button.textContent = 'Hapus Parameter';
        } else {
            var allDivs = document.querySelectorAll('div[name="toggleDiv"]');
            allDivs.forEach(function(div) {
            div.setAttribute('hidden', '');
            });
            button.textContent = 'Tambah Parameter';
            suhu.value = 27.0
            tekanan.value = 1013.25
        }
    });
  </script>
<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
            document.getElementById("ketepatanlokasi").value = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        var latitude = position.coords.latitude.toFixed(4);;
        var longitude = position.coords.longitude.toFixed(4);;
        var elevation = position.coords.altitude.toFixed(1);;
        var accuracy = position.coords.accuracy.toFixed(1);
        var timestamp = position.timestamp;

        var newtimestamp = parseInt(timestamp, 10);

        // Convert milliseconds to a Date object
        var date = new Date(newtimestamp);

        // Format the date to YYYY-MM-DDTHH:MM:SS (datetime-local input format)
        var year = date.getFullYear();
        var month = ('0' + (date.getMonth() + 1)).slice(-2);
        var day = ('0' + date.getDate()).slice(-2);
        var hours = ('0' + date.getHours()).slice(-2);
        var minutes = ('0' + date.getMinutes()).slice(-2);
        var seconds = ('0' + date.getSeconds()).slice(-2);

        var formattedDate = `${year}-${month}-${day}T${hours}:${minutes}:${seconds}`;

        // Set the value of the datetime-local input
        document.getElementById("datetime").value = formattedDate;

        document.getElementById("latitud").value = latitude;
        document.getElementById("longitud").value = longitude;
        document.getElementById("elevation").value = elevation;
        document.getElementById("ketepatanlokasi").value =
            "Ketepatan(m): " + accuracy;
    }

    function showError(error) {
        switch (error.code) {
            case error.PERMISSION_DENIED:
                document.getElementById("ketepatanlokasi").value = "User denied the request for Geolocation.";
                break;
            case error.POSITION_UNAVAILABLE:
                document.getElementById("ketepatanlokasi").value = "Location information is unavailable.";
                break;
            case error.TIMEOUT:
                document.getElementById("ketepatanlokasi").value = "The request to get user location timed out.";
                break;
            case error.UNKNOWN_ERROR:
                document.getElementById("ketepatanlokasi").value = "An unknown error occurred.";
                break;
        }
    }
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{% endblock %}